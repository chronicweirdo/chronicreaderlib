<!DOCTYPE html>
<html>
<head>
    <script src="/libs/jszip.js"></script>
    <!-- https://github.com/43081j/rar.js -->
    <script src="/libs/rar.js"></script>
    <script src="/libs/reader.js"></script>
    <script>
        var urls = ["/books/That_Affair_at_Elizabeth_by_Burton_Egbert_Stevenson.epub", "/books/Feature_Comics_111.cbz"];
        var positions = [0, 10]
        var index = 0;
        var book;
        var bookDisplay;
        function displayBook() {
            console.log(urls[index])
            let reader = new ChronicReader(
                urls[index], 
                document.getElementById("page"),
                { "position": positions[index]}
            )
        }
        function displayNextBook() {
            index = index + 1
            if (index >= urls.length) {
                index = 0
            }
            displayBook()
        }
        window.onload = function() {
            displayBook()
        }
        window.addEventListener('resize', function() {
            bookDisplay.refresh()
        }, true)
    </script>
    <style>
        body {
            overflow: hidden;
            /*font-size: 2em;*/
        }
        .page {
            position: fixed;
            width: 80%;
            height: 80%;
            top: 10%;
            left: 10%;
            background-color: #cc9999;
            overflow: hidden;
        }
    </style>
</head>
<body>
    <div id = "controls"><a onclick="displayNextBook();">next</a></div>
    <div id="page" class="page"></div>
</body>
</html>